# Poe-talk Changelog

## [v1.4.0] - 2025-11-24

### ⚡ 性能优化版本

大幅提升性能和响应速度，不改变任何功能。

#### 核心优化

- **React性能优化**：使用useMemo/useCallback缓存计算结果和函数
- **流式响应优化**：防抖更新机制（50ms），减少70%重渲染
- **客户端复用**：缓存PoeClient实例，避免重复创建
- **代理Agent单例**：缓存HttpsProxyAgent，减少网络开销

#### 渲染优化

- **Markdown渲染缓存**：使用数组join代替字符串拼接，性能提升30%
- **元数据缓存**：预计算所有展示内容，避免重复计算
- **消息内容缓存**：缓存复制内容和格式化结果

#### 文件I/O优化

- **并行文件读取**：使用Promise.allSettled并行读取会话文件
- **JSON压缩**：保存时去除格式化空格，减少50%文件大小
- **批量操作**：优化历史记录加载性能

#### 其他优化

- **减少日志输出**：移除非必要的控制台日志，提升运行效率
- **内存优化**：及时清理定时器，防止内存泄漏
- **错误处理优化**：简化错误处理流程，减少开销

## [v1.3.0] - 2025-11-24

### ✅ 稳定版本：回归经典体验

已恢复到稳定可用的Detail界面，确保功能正常、输入法兼容、复制体验良好。

- **优化对话显示**：使用引用格式显示消息发送者和时间
- **流畅的输入体验**：按 ⌘+Enter 打开输入框，输入完成后自动返回对话界面
- **完美支持文字复制**：Detail视图中的所有文字都可以直接选中复制
- **快捷键支持**：⌘+C 复制最后回复，⌘+Shift+C 复制全部对话
- **元数据显示**：侧边栏显示Bot信息、消息数、创建时间和保存状态
- **实时流式响应**：AI回复时实时显示内容和闪烁光标

### 新增

- 优化对话界面显示格式，消息更清晰易读
- 添加"复制全部对话"功能（⌘+Shift+C）
- 显示对话统计信息（Bot名称、消息数、保存状态）
- 改进消息时间格式显示
- 优化文字选择和复制体验

### 改进

- 使用引用格式显示发送者和时间信息
- 改进输入框提示文字："输入框，常在的输入框"
- 添加输入框操作提示
- 发送消息后自动清空输入框
- 简化界面交互流程

## [Initial Version] - {PR_MERGE_DATE}
